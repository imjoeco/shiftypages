function resizeImages(){for(content=document.getElementById("post-content"),contentImages=content.getElementsByTagName("img"),sizeMarker="n",window.outerWidth<=900&&(sizeMarker="m"),window.outerWidth<=420&&(sizeMarker="t"),i=0;i<contentImages.length;i++)contentImages[i].dataset.regularSize||(contentImages[i].dataset.regularSize=contentImages[i].src[contentImages[i].src.length-5]),"n"==contentImages[i].dataset.regularSize&&(contentImages[i].src=contentImages[i].src.replace(/_[anmt]\./,"_"+sizeMarker+"."))}function wrapPs(){for(content=document.getElementById("post-content"),contentPs=content.getElementsByTagName("p"),0==contentPs.length&&(contentPs=content.getElementsByTagName("div")),i=0;i<contentPs.length;i++)contentPs[i].id="para"+i;/para[0-9]+/.test(location.href)&&contentPs.length>0&&document.getElementById(location.href.match(/para[0-9]+/)[0]).scrollIntoView()}function getSelectionText(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e}function toggleMenu(e){var t=document.getElementById(e),n=t.scrollHeight+1,i=document.getElementById("clearout"),a=document.getElementById("greyout");-1!=t.className.indexOf("dropped")?(t.style.marginTop="-"+(n+80)+"px",t.className=t.className.replace(" dropped",""),a.style.display="none",i.style.display="none"):(t.style.marginTop="0px",t.className=t.className.concat(" dropped"),-1!=t.className.indexOf("shadow")&&(a.style.display="block"),-1!=t.className.indexOf("clearout")&&(i.style.display="block"))}function closeMenusBut(e){var t=document.getElementsByClassName("dropdown-menu");for(i=0;i<t.length;i++)menuHeight=t[i].scrollHeight+1,-1!=t[i].className.indexOf("dropped")&&t[i].id!=e&&(t[i].style.marginTop="-"+(menuHeight+80)+"px",t[i].className=t[i].className.replace(" dropped",""));document.getElementById("greyout").style.display="none",document.getElementById("clearout").style.display="none"}function createEditor(){var e,t=document.createElement("div"),n=document.createElement("div");n.id="feditor-container",document.body.insertBefore(n,document.body.firstChild);var i=document.createElement("div");i.id="open-feditor",i.innerHTML='<i class="icomoon-down-arrow"></i> Open Editor <i class="icomoon-down-arrow"></i>',i.addEventListener("mousedown",function(t){t.preventDefault(),e=saveSelection()},!1),n.appendChild(i),t.id="feditor",n.appendChild(t),createImageForm(),createVideoForm(),createLinkForm(),createAnchorForm();var a=[{name:"Undo",action:"undo",icon:"undo",className:"hide-small"},{name:"Redo",action:"redo",icon:"redo"},{name:"Bold",action:"bold",icon:"bold"},{name:"Italic",action:"italic",icon:"italic"},{name:"Underline",action:"underline",icon:"underline"},{name:"Strikethrough",action:"strikethrough",icon:"strikethrough"},{name:"Superscript",action:"superscript",icon:"superscript"},{name:"Subscript",action:"subscript",icon:"subscript"},{name:"Justify Left",action:"justifyLeft",icon:"paragraph-left"},{name:"Justify Center",action:"justifyCenter",icon:"paragraph-center"},{name:"Justify Right",action:"justifyRight",icon:"paragraph-right"},{name:"Justify Full",action:"justifyFull",icon:"paragraph-justify"},{name:"Unordered List",action:"insertUnorderedList",icon:"list"},{name:"Ordered List",action:"insertOrderedList",icon:"numbered-list"},{name:"Add Image",action:"showForm",icon:"image",formAction:"addImage",className:"fedit-image-button"},{name:"Add Video",action:"showForm",icon:"film",formAction:"addVideo"},{name:"Link",action:"showForm",icon:"link",formAction:"addLink"},{name:"Insert Anchor",action:"showForm",icon:"flag",formAction:"addAnchor"},{name:"View Source",action:"viewSource",icon:"code"}];n.style.display="none",resizeMargin(),i.addEventListener("click",function(){showEl(t)},!1),t=document.getElementById("feditor"),createButton({name:"Undo",action:"undo",icon:"undo",className:"show-small"},t);var r=appendSelect({appendTo:t,selectOptions:[{label:"h1",value:"<h1>"},{label:"h2",value:"<h2>"},{label:"h3",value:"<h3>"},{label:"h4",value:"<h4>"},{label:"h5",value:"<h5>"},{label:"h6",value:"<h6>"},{label:"p",value:"<p>"},{label:"div",value:"<div>"},{label:"pre",value:"<pre>"}],defaultValue:"<div>"});for(r.addEventListener("change",function(){document.execCommand("formatBlock",!1,this.options[this.selectedIndex].value)},!1),k=0;k<a.length;k++)createButton(a[k],t);var o=document.createElement("div");o.id="hide-feditor",o.innerHTML='<i class="icomoon-up-arrow"></i> Hide Editor <i class="icomoon-up-arrow"></i>',o.addEventListener("mousedown",function(e){e.preventDefault(),hideEl(t)},!1),t.appendChild(o)}function createPlaceholderFields(){var e,t,n,a=document.getElementsByClassName("fedit");for(j=0;j<a.length;j++)for(e=a[j],t=e.querySelectorAll("input[type='text'], textarea"),i=0;i<t.length;i++)n=document.createElement("div"),n.id="fedit-"+j+i,n.contentEditable=!0,n.className="fedit-field",/no-fedit/.test(t[i].className)&&(n.className=n.className+" no-feditor"),n.innerHTML=t[i].value,n.addEventListener("blur",function(){this.nextSibling.value=this.innerHTML},!1),-1==t[i].className.indexOf("no-fedit")?(n.addEventListener("focus",function(){showEl(document.getElementById("feditor-container"))},!1),t[i].parentNode.insertBefore(n,t[i]),n.dataset.inputId=t[i].id,-1==n.innerHTML.indexOf("<div>")&&(n.innerHTML="<div>"+n.innerHTML+"</div>",n.nextSibling.value=n.innerHTML)):(n.addEventListener("focus",function(){hideEl(document.getElementById("feditor-container"))},!1),t[i].parentNode.insertBefore(n,t[i]),n.dataset.inputId=t[i].id),t[i].style.display="none";addDeleteListeners()}function createBaseForm(e){return form=document.createElement("div"),form.className="fedit-form",form.id="fedit-"+e.action+"-form",form.style.display="none",e.appendTo.appendChild(form),formClose=document.createElement("a"),formClose.href="javascript:void(0)",formClose.className="fedit-form-close",formClose.innerHTML="X",formClose.addEventListener("mousedown",function(t){t.preventDefault(),closeForm(document.getElementById("fedit-"+e.action+"-form"))},!1),form.appendChild(formClose),formLabel=document.createElement("div"),formLabel.className="fedit-form-label",formLabel.innerHTML=e.label,form.appendChild(formLabel),formFields=document.createElement("div"),formFields.className="fedit-form-fields",form.appendChild(formFields),"undefined"!=typeof e.fieldId&&appendTextField({fieldLabel:e.fieldLabel,fieldId:e.fieldId,appendTo:formFields}),createButton({name:"Insert "+e.label,action:e.action,className:"fedit-form-button"},form),form}function createImageForm(){var e=createBaseForm({label:"Image",fieldLabel:"Link",action:"addImage",fieldId:"image-link-field",appendTo:document.getElementById("feditor-container")}),t=e.getElementsByClassName("fedit-form-fields")[0];appendInnerLabel({label:"Float",appendTo:t});appendSelect({selectId:"image-float-field",appendTo:t,selectOptions:["none","right","left"]});appendInnerLabel({label:"Align",appendTo:t});appendSelect({selectId:"image-align-field",appendTo:t,selectOptions:["left","center","right"]});loadImages()}function createVideoForm(){createBaseForm({label:"Video",fieldLabel:"Link",action:"addVideo",fieldId:"video-link-field",appendTo:document.getElementById("feditor-container")})}function createLinkForm(){feditorContainer=document.getElementById("feditor-container");var e=createBaseForm({label:"Link",action:"addLink",appendTo:feditorContainer}),t=e.getElementsByClassName("fedit-form-fields")[0];appendTextField({fieldLabel:"Text",fieldId:"link-text-field",appendTo:t}),appendTextField({fieldLabel:"URL",fieldId:"link-href-field",appendTo:t})}function createAnchorForm(){createBaseForm({label:"Anchor",fieldLabel:"Name",action:"addAnchor",fieldId:"anchor-name-field",appendTo:document.getElementById("feditor-container")})}function appendTextField(e){"undefined"!=typeof e.fieldLabel&&appendInnerLabel({label:e.fieldLabel,appendTo:e.appendTo}),fieldInput=document.createElement("input"),fieldInput.type="text",fieldInput.className="fedit-form-field","undefined"!=typeof e.fieldId&&(fieldInput.id=e.fieldId),e.appendTo.appendChild(fieldInput)}function appendSelect(e){for(select=document.createElement("select"),select.className="fedit-select","undefined"!=typeof e.selectId&&(select.id=e.selectId),optionList=e.selectOptions,i=0;i<optionList.length;i++)option=document.createElement("option"),"undefined"!=typeof optionList[i].label?(option.value=optionList[i].value,option.innerHTML=optionList[i].label):(option.value=optionList[i],option.innerHTML=optionList[i]),"undefined"!=typeof e.defaultValue&&option.value==e.defaultValue&&(option.selected=!0),select.appendChild(option);return"undefined"!=typeof e.appendTo&&e.appendTo.appendChild(select),select}function appendInnerLabel(e){label=document.createElement("div"),label.innerHTML=e.label,label.className="fedit-inner-label",label.style.display="inline-block",label.style.float="left",e.appendTo.appendChild(label)}function createButton(e,t){newButton=document.createElement("a"),newButton.className="undefined"!=typeof e.className?e.className+" "+e.action+" fedit-button":"fedit-button "+e.action,"showForm"!=e.action&&(newButton.id=e.action+"-button"),newButton.href="javascript:void(0)",newButton.title=e.name,newButton.innerHTML="undefined"!=typeof e.icon?'<i class="icomoon-'+e.icon+'"></i>':e.name,newButton.addEventListener("mousedown",function(t){t.preventDefault(),"viewSource"==e.action?null!=parentWithId(getSelectionParentElement(),"fedit-")?(feditParent=parentWithId(getSelectionParentElement(),"fedit-"),feditField=document.getElementById(feditParent.dataset.inputId),"undefined"!=typeof feditParent&&(feditField.value=feditParent.innerHTML,toggleDisplay(feditParent),toggleDisplay(feditField))):"undefined"!=typeof feditParent&&(feditParent.innerHTML=feditField.value,toggleDisplay(feditParent),toggleDisplay(feditField)):"showForm"==e.action?(currentSelection=saveSelection(),hideEl(document.getElementById("feditor")),"addLink"==e.formAction&&(document.getElementById("link-text-field").value=currentSelection),closeForms(),showEl(document.getElementById("fedit-"+e.formAction+"-form"))):"addAnchor"==e.action?insertAnchor(document.getElementById("anchor-name-field").value):"addLink"==e.action?insertLink(document.getElementById("link-text-field").value,document.getElementById("link-href-field").value):"addVideo"==e.action?insertVideo(document.getElementById("video-link-field").value):"addImage"==e.action?(floatSelect=document.getElementById("image-float-field"),alignSelect=document.getElementById("image-align-field"),insertImage({imageURL:document.getElementById("image-link-field").value,floatVal:floatSelect.options[floatSelect.selectedIndex].value,alignVal:alignSelect.options[alignSelect.selectedIndex].value})):document.execCommand(e.action),"showForm"!=e.action&&(closeForms(),showEl(document.getElementById("feditor"))),resizeMargin()},!1),t.appendChild(newButton)}function insertImage(e){insertText('<img src="'+e.imageURL+'" class="fedit-image" style="float:'+e.floatVal+"; text-align:"+e.alignVal+';"></img>'),document.getElementById("image-link-field").value=""}function insertVideo(e){e=e.replace(/http[s]?:/,"").replace("youtu.be","youtube.com/embed").replace("watch?v=","embed/").replace("//vimeo.com","//player.vimeo.com/video"),insertText('<div class="flex-video"><iframe src="'+e+'" class="fedit-video" width="420" height="315" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe></div>'),document.getElementById("video-link-field").value=""}function insertLink(e,t){insertText('<a href="'+t+'" class="fedit-link">'+e+"</a>"),document.getElementById("link-text-field").value="",document.getElementById("link-href-field").value=""}function insertAnchor(e){insertText('<a id="'+e+'" class="fedit-anchor">'),document.getElementById("anchor-name-field").value=""}function insertText(e){restoreSelection(currentSelection),document.execCommand("insertHTML",!1,e),addDeleteListeners()}function addDeleteListeners(){for(feditFields=document.getElementsByClassName("fedit-field"),i=0;i<feditFields.length;i++)for(deletableEls=feditFields[i].querySelectorAll("a, img, iframe"),j=0;j<deletableEls.length;j++)("A"!=deletableEls[j].tagName||"fedit-anchor"==deletableEls[j].className)&&deletableEls[j].addEventListener("mousedown",function(e){e.preventDefault(),confirm("Delete?")&&this.parentNode.removeChild(this)},!1)}function closeForm(e){hideEl(e),showEl(document.getElementById("feditor"))}function closeForms(){var e=document.getElementsByClassName("fedit-form");for(i=0;i<e.length;i++)e[i].style.display="none"}function resizeMargin(){feditorContainer=document.getElementById("feditor-container"),feditorContainer.nextElementSibling.style.marginTop=feditorContainer.offsetHeight+"px"}function showEditor(){window.innerWidth>840&&(document.getElementById("feditor").style.display="",resizeMargin())}function showEl(e){e.style.display="block",resizeMargin()}function hideEl(e){e.style.display="none",resizeMargin()}function toggleDisplay(e){"none"==e.style.display?showEl(e):hideEl(e)}function parentWithId(e,t){for(;"BODY"!=e.nodeName;){if(-1!=e.id.indexOf(t))return e;e=e.parentNode}return null}function getSelectionParentElement(){var e,t=null;return window.getSelection?(e=window.getSelection(),e.rangeCount&&(t=e.getRangeAt(0).commonAncestorContainer,1!=t.nodeType&&(t=t.parentNode))):(e=document.selection)&&"Control"!=e.type&&(t=e.createRange().parentElement()),t}function saveSelection(){if(window.getSelection){if(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount)return sel.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null}function restoreSelection(e){e&&(window.getSelection?(sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(e)):document.selection&&e.select&&e.select())}function loadImages(){if("undefined"!=typeof photosJSON&&photosJSON.length>0){var e=document.createElement("div"),t=document.getElementById("image-link-field"),n=document.getElementById("fedit-addImage-form").getElementsByClassName("fedit-form-fields")[0];e.id="post-thumbnails",e.className="non-fedit-div";var a=appendSelect({selectId:"image-size",selectOptions:[{label:"Small",value:"s"},{label:"Medium",value:"n"},{label:"Large",value:"b"}]});n.insertBefore(a,n.firstChild),a.options[1].selected=!0,a.addEventListener("change",function(){t.value=t.value.replace(/_[asntb]\./,"_"+this.value+".")},!1);var r;for(i=0;i<photosJSON.length;i++)r=e.appendChild(document.createElement("li")),imageUrl="http://farm"+photosJSON[i].farm+".staticflickr.com/"+photosJSON[i].server+"/"+photosJSON[i].flickr_id+"_"+photosJSON[i].secret+"_t.jpg",thumb=document.createElement("img"),thumb.className="post-thumbnail",thumb.src=imageUrl,thumb.dataset.imgUrl=imageUrl,thumb.addEventListener("mousedown",function(e){for(e.preventDefault(),activeThumbs=document.getElementById("feditor-container").getElementsByClassName("active"),j=0;j<activeThumbs.length;j++)activeThumbs[j].className=activeThumbs[j].className.replace(" active","");size=a.options[a.selectedIndex].value,t.value=sizeImage(imageUrl,size),this.className=this.className+" active"},!1),r.appendChild(thumb);n.insertBefore(e,n.childNodes[1])}}function sizeImage(e,t){return e.replace(/_[a-z]{1}\./i,"_"+t+".")}function checkTarget(e){var t,n,i,a=parseFloat(e.parentNode.offsetWidth)-handleWidth,r=e.parentNode.getAttribute("data-slider-target"),o=document.getElementById("copy-notice");r&&(t=document.getElementById(r),n=e.parentNode.getElementsByClassName("active-segment")[0],i=t.value*a,n&&(n.style.width=i+"px"),e.style.left=i+"px","photo_copyright_opacity"==r&&(o.style.opacity=t.value),"photo_copyright_size"==r&&(o.style.fontSize=Math.round(t.value*o.parentNode.offsetHeight/4)+"px"))}function slide(e){e.preventDefault();var t=document.getElementById(e.target.id),n=e.clientX,i=parseInt(t.style.left),a=n-i,r=t.parentNode.getElementsByClassName("active-segment")[0];sliderWidth=t.parentNode.offsetWidth-handleWidth;var o=t.parentNode.getAttribute("data-slider-target");if(o)var l,d=document.getElementById(o),s=document.getElementById("copy-notice");document.onmousemove=function(e){n=e.clientX,i=n-a,i>0&&sliderWidth>=i?(t.style.left=i+"px",r&&(r.style.width=i+"px")):i>sliderWidth?(t.style.left=sliderWidth+"px",r&&(r.style.width=sliderWidth+"px")):(t.style.left="0px",r&&(r.style.width="0px")),"photo_copyright_opacity"==o&&(s.style.opacity=i/sliderWidth),"photo_copyright_size"==o&&(l=Math.round(i/sliderWidth*s.parentNode.offsetHeight/4),s.style.fontSize=l>6?l+"px":"6px")},document.onmouseup=function(){var e=parseInt(t.style.left),n=round(e/sliderWidth),i=t.parentNode.getElementsByClassName("active-segment")[0];if(i.style.width=e+"px",document.onmousemove=function(){},document.onmouseup=function(){},o){if(d.value=n,"photo_copyright_opacity"==o){var a=document.getElementById("copy-notice");a.style.opacity=n}if("photo_copyright_size"==o){var a=document.getElementById("copy-notice"),r=Math.round(n*a.parentNode.offsetHeight/4);a.style.fontSize=r>6?r+"px":"6px"}}}}function round(e){return Math.round(1e5*e)/1e5}function activateUrlTarget(){/target[=-][0-9]+/.test(location.href)?(targetCount=document.getElementsByClassName("target-wrapper").length,urlTarget=location.href.replace(/[a-z0-9\/:\?\&\#\.\-\_\%\~]+target[=-]/i,"").replace(/&\S+/i,""),urlTarget>-1&&targetCount>urlTarget&&(targetSlider?slideToTarget(urlTarget):activateTarget(urlTarget))):targetSlider?slideToTarget(0):activateTarget(0)}function activateTarget(e){activeNodes=document.querySelectorAll(".active");for(var t=0;t<activeNodes.length;t++)"undefined"!=activeNodes[t].className&&(activeNodes[t].className=activeNodes[t].className.replace("active","").replace("  "," "));target=document.getElementById("target-"+e),target.className=target.className+" active",targetList&&(targetList=document.getElementById("target-list"),targetListNode=targetList.querySelectorAll("[data-target-id='"+e+"']")[0],targetListNode.className="active",targetList.scrollLeft=targetListNode.offsetLeft-targetList.offsetWidth/2+targetListNode.offsetWidth/4)}function slideToTarget(e){e=parseInt(e),currentTarget=document.getElementsByClassName("target-wrapper active")[0],currentTargetId=currentTarget.id.replace(/target-/,""),target=document.getElementById("target-"+e),sliderNext=document.getElementById("slider-next"),sliderPrev=document.getElementById("slider-prev"),activeNodes=document.querySelectorAll(".active");for(var t=0;t<activeNodes.length;t++)"undefined"!=typeof activeNodes[t].className&&(activeNodes[t].className=activeNodes[t].className.replace("active","").replace("  "," "));target.className=target.className+" active",targetList&&(targetList=document.getElementById("target-list"),targetListNode=targetList.querySelectorAll("[data-target-id='"+e+"']")[0],targetListNode.className="active",targetList.scrollLeft=targetListNode.offsetLeft-targetList.offsetWidth/2+targetListNode.offsetWidth/4),changeEditTarget(target),resizeToTarget(),moveToTarget(),targetsLength=document.getElementsByClassName("target-wrapper").length,sliderNext&&(nextTargetId=e+1,targetsLength>nextTargetId?(sliderNext.dataset.targetId=nextTargetId,sliderNext.style.display="block"):sliderNext.style.display="none"),sliderPrev&&(prevTargetId=e-1,prevTargetId>=0?(sliderPrev.dataset.targetId=prevTargetId,sliderPrev.style.display="block"):sliderPrev.style.display="none")}function moveToTarget(){target=document.getElementsByClassName("target-wrapper active")[0],sliderInner=document.getElementsByClassName("target-slider-inner")[0],targetOffset=-1*target.offsetLeft,sliderInner.style.left=targetOffset+"px"}function resizeToTarget(){target=document.getElementsByClassName("target-wrapper active")[0],document.getElementById("target-slider").style.height=target.offsetHeight+"px",sliderNext&&/photo-control/.test(sliderNext.className)&&(sliderNext.style.height=target.getElementsByTagName("img")[0].offsetHeight+"px",sliderNext.style.top=document.getElementById("page-title").offsetHeight+"px"),sliderPrev&&/photo-control/.test(sliderPrev.className)&&(sliderPrev.style.height=target.getElementsByTagName("img")[0].offsetHeight+"px",sliderPrev.style.top=document.getElementById("page-title").offsetHeight+"px")}function resizeTargets(){for(parentNode=targets[0].parentNode,parentWidth=Math.round(parentNode.parentNode.offsetWidth),i=0;i<targets.length;i++)targets[i].style.width=parentWidth+"px";parentNode.style.width=parentWidth*targets.length+"px",offset=document.getElementsByClassName("target-wrapper active")[0].offsetLeft,parentNode.style.left=Math.round(-1*offset)+"px"}function changeUrlTarget(e){/target[=-][0-9]+/.test(location.href)?history.pushState({target:e},document.title,location.href.replace(/target[=-][0-9]+/,"target="+e)):/[?]/.test(location.href)?history.pushState({target:e},document.title,location.href+"&target="+e):history.pushState({target:e},document.title,location.href+"?target="+e)}function changeEditTarget(e){editLink=document.getElementById("edit_link"),null!=editLink&&"undefined"!=typeof e.dataset.postId&&(editLink.href="/posts/"+e.dataset.postId+"/edit")}function keyPress(e){keyCode=String.fromCharCode(e.keyCode||e.charCode),directionalKeyCodes.test(keyCode)&&(targetList&&!targetSlider&&(targetList=document.getElementById("target-list"),currentTarget=targetList.getElementsByClassName("active")[0],null!=currentTarget&&(targetId=parseInt(currentTarget.dataset.targetId),nextTarget=/['DLf]/.test(keyCode)?targetId+1:targetId-1,nextTarget>-1&&nextTarget<targets.length&&activateTarget(nextTarget))),targetSlider&&(targetSlider=document.getElementById("target-slider"),currentTarget=targetSlider.getElementsByClassName("active")[0],null!=currentTarget&&(targetId=parseInt(currentTarget.id.replace(/[a-z]+-/i,"")),nextTarget=/['DLf]/.test(keyCode)?targetId+1:targetId-1,nextTarget>-1&&nextTarget<targets.length&&slideToTarget(nextTarget))))}function swipedetect(e,t){var n,i,a,r,o,l,d,s,c=e,u=100,m=500,f=t||function(){};c.addEventListener("touchstart",function(e){n=e.changedTouches[0],i="none",o=0,l=0,a=n.pageX,r=n.pageY,s=(new Date).getTime()},!1),c.addEventListener("touchmove",function(e){n=e.changedTouches[0],l=n.pageY-r,window.scroll(0,l)},!1),c.addEventListener("touchend",function(e){n=e.changedTouches[0],o=n.pageX-a,d=(new Date).getTime()-s,m>=d&&Math.abs(o)>=u&&(i=0>o?"left":"right"),f(i)},!1)}!function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)},fire:function(t,n,i){var a=e.Event(n);return t.trigger(a,i),a.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(i){var a,r,o,l,d,s,c,u;if(n.fire(i,"ajax:before")){if(l=i.data("cross-domain"),d=l===t?null:l,s=i.data("with-credentials")||null,c=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){a=i.attr("method"),r=i.attr("action"),o=i.serializeArray();var m=i.data("ujs:submit-button");m&&(o.push(m),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(a=i.data("method"),r=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(a=i.data("method")||"get",r=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(a=i.data("method"),r=n.href(i),o=i.data("params")||null);u={type:a||"GET",data:o,dataType:c,beforeSend:function(e,a){return a.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+a.accepts.script),n.fire(i,"ajax:beforeSend",[e,a])},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:d},s&&(u.xhrFields={withCredentials:s}),r&&(u.url=r);var f=n.ajax(u);return i.trigger("ajax:send",f),f}return!1},handleMethod:function(i){var a=n.href(i),r=i.data("method"),o=i.attr("target"),l=e("meta[name=csrf-token]").attr("content"),d=e("meta[name=csrf-param]").attr("content"),s=e('<form method="post" action="'+a+'"></form>'),c='<input name="_method" value="'+r+'" type="hidden" />';d!==t&&l!==t&&(c+='<input name="'+d+'" value="'+l+'" type="hidden" />'),o&&s.attr("target",o),s.hide().append(c).appendTo("body"),s.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),a=!1;return i?(n.fire(e,"confirm")&&(a=n.confirm(i),t=n.fire(e,"confirm:complete",[a])),a&&t):!0},blankInputs:function(t,n,i){var a,r,o=e(),l=n||"input,textarea",d=t.find(l);return d.each(function(){if(a=e(this),r=a.is("input[type=checkbox],input[type=radio]")?a.is(":checked"):a.val(),!r==!i){if(a.is("input[type=radio]")&&d.filter('input[type=radio]:checked[name="'+a.attr("name")+'"]').length)return!0;o=o.add(a)}}),o.length?o:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var a=e(this),r=a.data("method"),o=a.data("params"),l=i.metaKey||i.ctrlKey;if(!n.allowAction(a))return n.stopEverything(i);if(!l&&a.is(n.linkDisableSelector)&&n.disableElement(a),a.data("remote")!==t){if(l&&(!r||"GET"===r)&&!o)return!0;var d=n.handleRemote(a);return d===!1?n.enableElement(a):d.error(function(){n.enableElement(a)}),!1}return a.data("method")?(n.handleMethod(a),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var a=e(this),r=a.data("remote")!==t,o=n.blankInputs(a,n.requiredInputSelector),l=n.nonBlankInputs(a,n.fileInputSelector);if(!n.allowAction(a))return n.stopEverything(i);if(o&&a.attr("novalidate")==t&&n.fire(a,"ajax:aborted:required",[o]))return n.stopEverything(i);if(r){if(l){setTimeout(function(){n.disableFormElements(a)},13);var d=n.fire(a,"ajax:aborted:file",[l]);return d||setTimeout(function(){n.enableFormElements(a)},13),d}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var a=i.attr("name"),r=a?{name:a,value:i.val()}:null;i.closest("form").data("ujs:submit-button",r)}),i.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery);/*
 * Foundation Responsive Library
 * http://foundation.zurb.com
 * Copyright 2013, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
var libFuncName=null;if("undefined"==typeof jQuery&&"undefined"==typeof Zepto&&"function"==typeof $)libFuncName=$;else if("function"==typeof jQuery)libFuncName=jQuery;else{if("function"!=typeof Zepto)throw new TypeError;libFuncName=Zepto}!function(e,t,n,i){"use strict";/*
    matchMedia() polyfill - Test a CSS media 
    type/query in JS. Authors & copyright (c) 2012: 
    Scott Jehl, Paul Irish, Nicholas Zakas. 
    Dual MIT/BSD license

    https://github.com/paulirish/matchMedia.js
  */
e("head").append('<meta class="foundation-mq-small">'),e("head").append('<meta class="foundation-mq-medium">'),e("head").append('<meta class="foundation-mq-large">'),t.matchMedia=t.matchMedia||function(e){var t,n=e.documentElement,i=n.firstElementChild||n.firstChild,a=e.createElement("body"),r=e.createElement("div");return r.id="mq-test-1",r.style.cssText="position:absolute;top:-100em",a.style.background="none",a.appendChild(r),function(e){return r.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(a,i),t=42===r.offsetWidth,n.removeChild(a),{matches:t,media:e}}}(n),Array.prototype.filter||(Array.prototype.filter=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"==typeof e){for(var i=[],a=arguments[1],r=0;n>r;r++)if(r in t){var o=t[r];e&&e.call(a,o,r,t)&&i.push(o)}return i}}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},a=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,a.prototype=new i,a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&1/0!=i&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var a=i>=0?i:Math.max(n-Math.abs(i),0);n>a;a++)if(a in t&&t[a]===e)return a;return-1}),e.fn.stop=e.fn.stop||function(){return this},t.Foundation={name:"Foundation",version:"4.3.2",cache:{},media_queries:{small:e(".foundation-mq-small").css("font-family").replace(/\'/g,""),medium:e(".foundation-mq-medium").css("font-family").replace(/\'/g,""),large:e(".foundation-mq-large").css("font-family").replace(/\'/g,"")},stylesheet:e("<style></style>").appendTo("head")[0].sheet,init:function(t,n,i,a,r,o){var l,d=[t,i,a,r],s=[],o=o||!1;if(o&&(this.nc=o),this.rtl=/rtl/i.test(e("html").attr("dir")),this.scope=t||this.scope,n&&"string"==typeof n&&!/reflow/i.test(n)){if(/off/i.test(n))return this.off();if(l=n.split(" "),l.length>0)for(var c=l.length-1;c>=0;c--)s.push(this.init_lib(l[c],d))}else{/reflow/i.test(n)&&(d[1]="reflow");for(var u in this.libs)s.push(this.init_lib(u,d))}return"function"==typeof n&&d.unshift(n),this.response_obj(s,d)},response_obj:function(e,t){for(var n=0,i=t.length;i>n;n++)if("function"==typeof t[n])return t[n]({errors:e.filter(function(e){return"string"==typeof e?e:void 0})});return e},init_lib:function(e,t){return this.trap(function(){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),this.libs[e].init.apply(this.libs[e],t)):function(){}}.bind(this),e)},trap:function(e,t){if(!this.nc)try{return e()}catch(n){return this.error({name:t,message:"could not be initialized",more:n.name+" "+n.message})}return e()},patch:function(e){this.fix_outer(e),e.scope=this.scope,e.rtl=this.rtl},inherit:function(e,t){for(var n=t.split(" "),i=n.length-1;i>=0;i--)this.lib_methods.hasOwnProperty(n[i])&&(this.libs[e.name][n[i]]=this.lib_methods[n[i]])},random_str:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var n="",i=0;e>i;i++)n+=t[Math.floor(Math.random()*t.length)];return n},libs:{},lib_methods:{set_data:function(e,t){var n=[this.name,+new Date,Foundation.random_str(5)].join("-");return Foundation.cache[n]=t,e.attr("data-"+this.name+"-id",n),t},get_data:function(e){return Foundation.cache[e.attr("data-"+this.name+"-id")]},remove_data:function(t){t?(delete Foundation.cache[t.attr("data-"+this.name+"-id")],t.attr("data-"+this.name+"-id","")):e("[data-"+this.name+"-id]").each(function(){delete Foundation.cache[e(this).attr("data-"+this.name+"-id")],e(this).attr("data-"+this.name+"-id","")})},throttle:function(e,t){var n=null;return function(){var i=this,a=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,a)},t)}},data_options:function(t){function n(e){return!isNaN(e-0)&&null!==e&&""!==e&&e!==!1&&e!==!0}function i(t){return"string"==typeof t?e.trim(t):t}var a,r,o={},l=(t.attr("data-options")||":").split(";"),d=l.length;for(a=d-1;a>=0;a--)r=l[a].split(":"),/true/i.test(r[1])&&(r[1]=!0),/false/i.test(r[1])&&(r[1]=!1),n(r[1])&&(r[1]=parseInt(r[1],10)),2===r.length&&r[0].length>0&&(o[i(r[0])]=i(r[1]));return o},delay:function(e,t){return setTimeout(e,t)},scrollTo:function(n,i,a){if(!(0>a)){var r=i-e(t).scrollTop(),o=r/a*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(o,10))||(t.scrollTo(0,e(t).scrollTop()+o),this.scrollTo(n,i,a-10))}.bind(this),10)}},scrollLeft:function(e){return e.length?"scrollLeft"in e[0]?e[0].scrollLeft:e[0].pageXOffset:void 0},empty:function(e){if(e.length&&e.length>0)return!1;if(e.length&&0===e.length)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},addCustomRule:function(e,t){if(t===i)Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length);else{var n=Foundation.media_queries[t];n!==i&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }")}}},fix_outer:function(e){e.outerHeight=function(e,t){return"function"==typeof Zepto?e.height():"undefined"!=typeof t?e.outerHeight(t):e.outerHeight()},e.outerWidth=function(e,t){return"function"==typeof Zepto?e.width():"undefined"!=typeof t?e.outerWidth(t):e.outerWidth()}},error:function(e){return e.name+" "+e.message+"; "+e.more},off:function(){return e(this.scope).off(".fndtn"),e(t).off(".fndtn"),!0},zj:e},e.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}}(libFuncName,this,this.document);var content=document.getElementById("post-content"),images,contentImages,sizeMarker;window.addEventListener("load",function e(){if(window.removeEventListener("load",e,!1),content){for(images=content.getElementsByTagName("img"),wrapPs(),i=0;i<images.length;i++)"right"==images[i].style.float?images[i].style.marginLeft="18px":"left"==images[i].style.float&&(images[i].style.marginRight="18px"),images[i].addEventListener("click",function(){this.className.indexOf("expanded-image")>-1?(this.className=this.className.replace(" expanded-image",""),sizeMarker=this.dataset.regularSize,window.outerWidth<=768&&(sizeMarker="m"),window.outerWidth<=420&&(sizeMarker="t"),this.src=this.src.replace(/_[b]\./,"_"+sizeMarker+".")):(this.dataset.regularSize||(this.dataset.regularSize=this.src[this.src.length-5]),this.className+=" expanded-image",this.src=this.src.replace(/_[anmt]\./,"_b."))},!1);window.addEventListener("resize",function(){resizeImages()},!1),resizeImages()}},!1),window.addEventListener("load",function t(){window.removeEventListener("load",t,!1);var e=document.getElementsByClassName("menu-toggle");for(i=0;i<e.length;i++)e[i].addEventListener("click",function(){targetId=this.dataset.menuId,closeMenusBut(targetId),toggleMenu(targetId)},!1);document.getElementById("greyout").addEventListener("click",function(){closeMenusBut()},!1),document.getElementById("clearout").addEventListener("click",function(){closeMenusBut()},!1)},!1),window.addEventListener("load",function n(){window.removeEventListener("load",n,!1),createEditor(),createPlaceholderFields(),window.addEventListener("resize",resizeMargin,!1),window.addEventListener("resize",showEditor,!1)},!1);var form,formClose,formLabel,formFields,fieldLabel,fieldInput,select,optionList,option,label,deletableEls,feditFields,handleWidth=24;window.addEventListener("load",function a(){window.removeEventListener("load",a,!1);var e=document.getElementsByClassName("handle");if(e.length>0){for(i=0;i<e.length;i++)e[i].id="handle-"+i,0==e[i].style.left.length&&checkTarget(e[i]),e[i].addEventListener("mousedown",slide,!1);document.getElementById("notice-settings").style.display="none"}},!1);var activeNodes,target,targetListNode,targetCount,urlTarget,currentTarget,keyCode,targets,targetSlider,targetList,currentTargetId,parentNode,sliderNext,sliderPrev;window.addEventListener("load",function r(){window.removeEventListener("load",r,!1);var e=document.querySelectorAll("[data-target-id]");if(e.length>0){targets=document.getElementsByClassName("target-wrapper"),targetSlider=document.getElementById("target-slider"),targetList=document.getElementById("target-list");for(var t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.preventDefault(),targetSlider?slideToTarget(this.dataset.targetId):activateTarget(this.dataset.targetId)},!1)}if(targetSlider){var n=targetSlider.outerHTML,i=n.indexOf(">")+1;n=n.slice(0,i)+'<div class="target-slider-inner" style="left:0px;">'+n.slice(i,n.size)+"</div>",targetSlider.outerHTML=n,resizeTargets(),resizeToTarget(),window.addEventListener("resize",function(){resizeTargets(),resizeToTarget()}),document.getElementById("target-slider").addEventListener("click",function(){changeUrlTarget(document.querySelectorAll(".target-wrapper.active")[0].id.replace("target-",""))},!1)}e.length>0&&activateUrlTarget(),targetSlider&&swipedetect(document.getElementById("target-slider"),function(e){"none"!=e&&(currentTarget=document.getElementsByClassName("target-wrapper active")[0],currentTargetId=parseInt(currentTarget.id.replace(/target-/,"")),targets=document.getElementsByClassName("target-wrapper"),"left"==e?nextTarget=currentTargetId+1:"right"==e&&(nextTarget=currentTargetId-1),nextTarget>-1&&nextTarget<targets.length&&slideToTarget(nextTarget))})},!1);var editLink;document.onkeyup=keyPress;var directionalKeyCodes=/['%ADHLfd]/;$(function(){$(document).foundation()});